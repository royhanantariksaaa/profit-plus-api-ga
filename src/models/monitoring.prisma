generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

// Define "PIC" Table
model PIC {
    id         String   @id @default(uuid())
    name       String
    phone      String
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
    created_by String
    updated_by String

    // Relationship
    project_pic_external   Project[]     @relation("ExternalPIC")
    project_pic_segment    Project[]     @relation("SegmentPIC")
    project_pic_midfielder ProjectInit[]
}

// Define "Customer" Table
model Customer {
    id         String   @id @default(uuid())
    name       String
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
    created_by String
    updated_by String

    // Relationship
    project Project[]
}

// Define "Project" Table
model Project {
    id                    String          @id @default(uuid())
    start_date            DateTime
    end_date              DateTime
    subscription_duration Int
    customer              Customer        @relation(fields: [customer_id], references: [id])
    customer_id           String          @unique
    topic                 String
    status                String
    pic_external          PIC             @relation(name: "ExternalPIC", fields: [pic_external_id], references: [id])
    pic_external_id       String
    segment               String
    pic_segment           PIC             @relation(name: "SegmentPIC", fields: [pic_segment_id], references: [id])
    pic_segment_id        String
    project_init          ProjectInit     @relation(fields: [project_init_id], references: [id])
    project_init_id       String          @unique
    project_ongoing       ProjectOngoing  @relation(fields: [project_ongoing_id], references: [id])
    project_ongoing_id    String          @unique
    project_drop          ProjectDrop     @relation(fields: [project_drop_id], references: [id])
    project_drop_id       String          @unique
    project_close_out     ProjectCloseOut @relation(fields: [project_close_out_id], references: [id])
    project_close_out_id  String          @unique
    created_at            DateTime        @default(now())
    updated_at            DateTime        @updatedAt
    created_by            String
    updated_by            String
}

// Define "ProjectInit" Table
model ProjectInit {
    id                         String   @id @default(uuid())
    nde_request                String // File id
    midfielder                 String
    related_unit               String
    pic_midfielder             PIC      @relation(fields: [pic_midfielder_id], references: [id])
    pic_midfielder_id          String
    mom_req                    String // File id
    helix                      String
    lir_requirement            String // File id
    requester                  String
    impact                     String
    potential_employee_trained Int
    nde_determination          String // File id
    tariff                     Int
    potential_revenue          Int
    created_at                 DateTime @default(now())
    updated_at                 DateTime @updatedAt
    created_by                 String
    updated_by                 String

    // Relationship
    project Project?
}

// Define "ProjectOngoing" Table
model ProjectOngoing {
    id                  String   @id @default(uuid())
    nde_req_cfu_to_mid  String // File id
    nde_req_mid_to_tcuc String // File id
    UIC                 String
    solutions           String // Relate to "Product" Table in Porto
    start_access        DateTime
    end_access          DateTime
    mom_readiness       String // File id
    nde_confirmation    String // File id
    baa                 String // File id
    bast                String // File id
    created_at          DateTime @default(now())
    updated_at          DateTime @updatedAt
    created_by          String
    updated_by          String

    // Relationship
    project Project?
}

// Define "ProjectDrop" Table
model ProjectDrop {
    id               String   @id @default(uuid())
    nde_project_drop String // File id
    created_at       DateTime @default(now())
    updated_at       DateTime @updatedAt
    created_by       String
    updated_by       String

    // Relationship
    project Project?
}

// Define "ProjectCloseOut"
model ProjectCloseOut {
    id                      String   @id @default(uuid())
    mom_reconciles          String // File id
    nde_revenue_recognition String // File id
    employee_trained        Int
    revenue_in              Int
    report_project          String // File id
    nde_report_project      String // File id
    nps                     String // File id
    delivery_year           String
    created_at              DateTime @default(now())
    updated_at              DateTime @updatedAt
    created_by              String
    updated_by              String

    // Relationship
    project Project?
}

// Define "File" Table
model File {
    id            String   @id @default(uuid())
    original_name String // Original file name when uploaded
    file_name     String // Renamed file after upload
    document_type String // Ex: NDE Penetapan, MoM Readiness dll
    encoding      String // Ex: 7bit
    mime_type     String // Ex: image/jpeg
    created_at    DateTime @default(now())
    updatedAt     DateTime @updatedAt
    created_by    String
    updated_by    String
}
